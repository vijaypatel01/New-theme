{%- if card-product != empty -%}
<div class="image-block">
  <img
    srcset="
      {%- if card-product.featured_media.width >= 165 -%}{{ card-product.featured_media | image_url: width: 165 }} 165w,{%- endif -%}
      {%- if card-productt.featured_media.width >= 360 -%}{{ card-product.featured_media | image_url: width: 360 }} 360w,{%- endif -%}
      {%- if card-product.featured_media.width >= 533 -%}{{ card-product.featured_media | image_url: width: 533 }} 533w,{%- endif -%}
      {%- if card-product.featured_media.width >= 720 -%}{{ card-product.featured_media | image_url: width: 720 }} 720w,{%- endif -%}
      {%- if card-product.featured_media.width >= 940 -%}{{ card-product.featured_media | image_url: width: 940 }} 940w,{%- endif -%}
      {%- if card-productt.featured_media.width >= 1066 -%}{{ card-product.featured_media | image_url: width: 1066 }} 1066w,{%- endif -%}
      {{ card-product.featured_media | image_url }} {{ card-product.featured_media.width }}w
    "
    src="{{ card-product.featured_media | image_url: width: 533 }}"
    sizes="(min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 130 | divided_by: 4 }}px, (min-width: 990px) calc((100vw - 130px) / 4), (min-width: 750px) calc((100vw - 120px) / 3), calc((100vw - 35px) / 2)"
    alt="{{ card-product.featured_media.alt | escape }}"
    class="motion-reduce"
    {% unless lazy_load == false %}
      loading="lazy"
    {% endunless %}
    width="{{ card-product.featured_media.width }}"
    height="{{ card-product.featured_media.height }}"
  >
  {%- if card-product.media[1] != null -%}
    <img
      srcset="
        {%- if card-product.media[1].width >= 165 -%}{{ card-product.media[1] | image_url: width: 165 }} 165w,{%- endif -%}
        {%- if card-product.media[1].width >= 360 -%}{{ card-product.media[1] | image_url: width: 360 }} 360w,{%- endif -%}
        {%- if card-product.media[1].width >= 533 -%}{{ card-product.media[1] | image_url: width: 533 }} 533w,{%- endif -%}
        {%- if card-product.media[1].width >= 720 -%}{{ card-product.media[1] | image_url: width: 720 }} 720w,{%- endif -%}
        {%- if card-product.media[1].width >= 940 -%}{{ card-product.media[1] | image_url: width: 940 }} 940w,{%- endif -%}
        {%- if card-product.media[1].width >= 1066 -%}{{ card-product.media[1] | image_url: width: 1066 }} 1066w,{%- endif -%}
        {{ card-product.media[1] | image_url }} {{ card-product.media[1].width }}w
      "
      src="{{ card-product.media[1] | image_url: width: 533 }}"
      sizes="(min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 130 | divided_by: 4 }}px, (min-width: 990px) calc((100vw - 130px) / 4), (min-width: 750px) calc((100vw - 120px) / 3), calc((100vw - 35px) / 2)"
      alt=""
      class="motion-reduce"
      loading="lazy"
      width="{{ card-product.media[1].width }}"
      height="{{ card-product.media[1].height }}"
    >
  {%- endif -%}
</div>
<div class="text-block flex flex-wrap gap">
  <h3 class="w-100">
    <a href="{{ card-product.url }}">{{ card-product.title | capitalize }}</a>
  </h3>
  <span class="w-100">{{ card-product.price | money }}</span>
  <product-form data-section-id="{{ section.id }}" class="w-100">
  {%- form 'product',
    card-product,
    id: product_form_id,
    class: 'form',
    novalidate: 'novalidate',
    data-type: 'add-to-cart-form'
  -%}
    <input
      type="hidden"
      name="id"
      value="{{ card-product.selected_or_first_available_variant.id }}"
      class="product-variant-id"
      {% if card-product.selected_or_first_available_variant.available == false %}
        disabled
      {% endif %}
    >
    <button
      id="{{ product_form_id }}-submit"
      type="submit"
      name="add"
      class="quick-add__submit button-primary"
      aria-haspopup="dialog"
      aria-labelledby="{{ product_form_id }}-submit title-{{ section.id }}-{{ card-product.id }}"
      aria-live="polite"
      data-sold-out-message="true"
      {% if card-product.selected_or_first_available_variant.available == false %}
        disabled
      {% endif %}
    >
      <span>
        {%- if card-product.selected_or_first_available_variant.available -%}
          Add To Cart
        {%- else -%}
          Sold Out
        {%- endif -%}
      </span>
    </button>
  {%- endform -%}
</product-form>
<button class="quick-view-btn button-primary" data-product-id="quick-view-{{ card-product.id }}">
    Quick View
  </button>
  <div id="quick-view-{{ card-product.id }}" class="quick-view-modal">
    <div class="modal-content">
      <span class="close-btn">&times;</span>
      <div class="quick-view-product">
        <img src="{{ card-product.featured_image | img_url: '400x' }}" alt="{{ card-product.title }}">
        <h2>{{ card-product.title }}</h2>
        <p>{{ card-product.price | money }}</p>
        <p>{{ card-product.description | truncatewords: 30 }}</p>

        <form method="post" action="/cart/add">
          <input type="hidden" name="id" value="{{ card-product.variants.first.id }}">
          <button type="submit" class="button-primary">Add to Cart</button>
        </form>
      </div>
    </div>
  </div>
</div>
{% else %}
  <div class="image-block">
    {%- if placeholder_image -%}
      {{ placeholder_image | placeholder_svg_tag: 'placeholder-svg' }}
    {%- else -%}
      {{ 'product-apparel-2' | placeholder_svg_tag: 'placeholder-svg' }}
    {% endif %}
  </div>
  <div class="text-block flex flex-wrap gap">
    <h3 class="w-100">
      Product Title
    </h3>
    <span class="w-100">9.99</span>
  </div>
{% endif %}